<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href = "searchCharacter.css">
</head>
<body>

<form id="GETcharacterform">
    <label for ="searchCharacter"> Search a character!</label>
    <input type="text" id="searchCharacter" name="searchCharacter">
    <input type = "button" id ="searchButton" value="Search!" onclick="clearcontent('myData')">
</form>

<div id="myData"></div>

<script>
    function clearcontent(elementID){
        document.getElementById(elementID).innerHTML = ""
    }
</script>

<script>
    function passVariable(name){
        console.log("hoi");
        window.localStorage.setItem('name', name);
        console.log(localStorage['name']);
    }

</script>

<script>
    function appendData(data) {
        let mainContainer = document.getElementById("myData");
        let characterNav = document.createElement('nav');

        let item;
        for (item of data) {
            let characterA = document.createElement('a');
            let characterLi = document.createElement('li');

            characterLi.setAttribute('name', item.name);
            console.log("First " + item.name);
            characterLi.appendChild(document.createElement('small')).textContent= item.name;
            characterA.setAttribute('href', 'character.html');
            characterA.setAttribute('name', item.name);
            characterA.onclick =function() {passVariable(item.name)};

            characterA.appendChild(characterLi);
            characterNav.appendChild(characterA);
            mainContainer.appendChild(characterNav);
        }

    }


</script>


<script type="text/javascript">
    document.querySelector("#searchButton").addEventListener("click", function (){
        let character = document.querySelector("#searchCharacter").value;

        fetch("restservices/characters/"+character, {method : 'GET'})//with GET-method, no body is sent. So no need for a formData or encData.
        .then (response => response.json())
        .then(function(data){
            appendData(data)
        })
        .then(function(myJson){
            console.log(myJson)
        })
    })
</script>

</body>
</html>